<!DOCTYPE html>
<html lang="zh">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>柚子不喝茶</title>
  <link href="css/common/bootstrap.min.css" rel="stylesheet" />
  <link href="css/common/bootstrap-icons.min.css" rel="stylesheet" />
  <link href="css/youzi.css" rel="stylesheet" />
  <!-- 数字字体 -->
  <style>
    @font-face {
      font-family: 'Digital-7';
      src: url('font/digital-7-mono-3.ttf') format('truetype');
      font-weight: normal;
      font-style: normal;
    }
  </style>
  <!-- 网站图标 -->
  <link rel="icon" href="img/favicon.png" type="image/png">
  <!-- Excel生成库 -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/xlsx/0.18.5/xlsx.full.min.js"></script>
</head>

<body>
  <div class="container">
    <!-- 箱规计算模块 -->
    <div class = "module">
      <!-- <h3 class="text-center">箱规计算</h3> -->
      <div id="calculator">
        <div class="row">
          <!-- 选择派送方式 -->
          <!-- 发货区域 -->
          <div class="col-md-4">
            <div class="form-floating">
              <select class="form-select" id="delivery-method" oninput="calculate();">
                <option value="卡派">卡派</option>
                <option value="快递派">快递派</option>
                <option value="快递5000">快递5000</option>
              </select>
              <label for="delivery-method">派送方式</label>
            </div>
          </div>
        
          <!-- 选择国家 -->
          <div class="col-md-4">
            <div class="form-floating">
              <select class="form-select" id="cal-country" oninput="calculate();">
                <option value="美国">美国</option>
                <option value="加拿大">加拿大</option>
                <option value="欧洲">欧洲</option>
                <option value="英国">英国</option>
              </select>
              <label for="cal-country">国家</label>
            </div>
          </div>
          <!-- 选择快递方式 -->
          <div class="col-md-4">
            <div class="form-floating">
              <select class="form-select" id="cal-channel" oninput="calculate();">
                <option value="UPS">UPS</option>
                <option value="DPD">DPD</option>
                <option value="GLS">GLS</option>
                <option value="CWE">CWE</option>
              </select>
              <label for="cal-channel">快递方式</label>
            </div>
          </div>
        </div>

        <div class="margin-vertical">
          <label for="dimension-input" class = "subtitle">箱规识别</label>
          <div class="input-group">
            <input type="text" id="dimension-input" class="form-control" placeholder="例如: 45*45*50cm, 10.15kg, 21ctns" oninput="parseDimensions()" />
            <button class="btn btn-outline-danger" type="button" onclick="clearBoxTable()" title="一键清空所有箱规数据">
              <i class="bi bi-trash"></i> 清空
            </button>
          </div>
        </div>

        <!-- 箱规输出表格 -->
        <table class="table table-bordered">
          <thead>
            <tr>
              <th class="narrow-column">编号</th>
              <th class="narrow-column">长 (cm)</th>
              <th class="narrow-column">宽 (cm)</th>
              <th class="narrow-column">高 (cm)</th>
              <th class="narrow-column">单箱实重</th>
              <th class="narrow-column">箱数</th>
              <th class="narrow-column">体积</th>
              <th class="narrow-column">单箱材积</th>
              <th class="narrow-column">实重</th>
              <th class="narrow-column">材积重</th>
              <th class="narrow-column">周长</th>
              <th class="narrow-column">操作</th>
            </tr>
          </thead>
          <tbody id="box-table">
            <tr class="input-row">
              <td class="index-cell">1</td> <!-- 编号单元格 -->
              <td><input type="number" class="form-control length" oninput="calculate()" /></td>
              <td><input type="number" class="form-control width" oninput="calculate()" /></td>
              <td><input type="number" class="form-control height" oninput="calculate()" /></td>
              <td><input type="number" class="form-control weight" oninput="calculate()" /></td>
              <td><input type="number" class="form-control quantity" oninput="calculate()" /></td>
              <td class="result-cell">0.00 cbm</td>
              <td class="result-cell">0 kg</td>
              <td class="result-cell">0 kg</td>
              <td class="result-cell">0 kg</td>
              <td class="result-cell">0 cm</td>
              <td class="button-cell">
                <button class="btn btn-success btn-sm" onclick="addRow()">+</button>
                <button class="btn btn-danger btn-sm" onclick="deleteRow(event)">-</button>
              </td>
            </tr>
          </tbody>
        </table>

        <!-- 总结区域 -->
        <div class="result my-4">
          <div class="row subtitle">
            <div class="col"><p>总箱数: <span id="total-quantity">0</span> 箱</p></div>
            <div class="col"><p>总体积: <span id="total-volume">0.00</span> cbm</p></div>
            <div class="col"><p>总实重: <span id="total-weight">0</span> kg</p></div>
            <div class="col"><p>总材积重: <span id="total-dimension-weight">0</span> kg</p></div>
            <div class="col"><p>计费重: <span id="billing-weight">0</span> kg</p></div>
            <div class="col"><p>泡比: <span id="volume-ratio">0.00</span></p></div>
          </div>
        </div>
        
        <!-- 计算历史区域 -->
        <div class="form-group mt-3">
          <button class="btn btn-outline-info" type="button" data-bs-toggle="collapse" data-bs-target="#historyCollapse"
            aria-expanded="false" aria-controls="historyCollapse">
            <i class="bi bi-clock-history"></i> 计算历史 <span class="badge bg-info" id="historyCount">0</span>
          </button>
          <div class="collapse" id="historyCollapse">
            <div class="card card-body mt-2">
              <div class="d-flex justify-content-between align-items-center mb-2">
                <h6 class="mb-0">最近的计算记录</h6>
                <button class="btn btn-sm btn-outline-danger" onclick="clearHistory()">
                  <i class="bi bi-trash"></i> 清空历史
                </button>
              </div>
              <div id="history-container" class="history-list">
                <!-- 历史记录将在这里动态显示 -->
              </div>
            </div>
          </div>
        </div>  

        <!-- Collapse 组件 箱规汇总信息 -->
        <div class="form-group mt-3">
          <button class="btn btn-outline-secondary" type="button" data-bs-toggle="collapse" data-bs-target="#summaryCollapse"
            aria-expanded="false" aria-controls="summaryCollapse">
            显示汇总信息
          </button>
          <div class="collapse" id="summaryCollapse">
            <div class="card card-body">
              <p>箱规: <span id="summary-size">[length]*[width]*[height]cm</span> </p>
              <p>计费重: <span id="summary-chargeweight">0</span> kg</p>
              <p>总结：<span id="summary-desc">0ctns 0kg 0cbm</span></p>
            </div>
          </div>
        </div>
        <!-- 警告信息区域（修改后）-->
        <div class="form-group mt-3">
          <button class="btn btn-outline-danger" type="button" data-bs-toggle="collapse" data-bs-target="#warningsCollapse"
            id="warningsToggle" style="display: none;"> <!-- 初始隐藏 -->
            警告信息 <span class="badge bg-danger" id="warningCount">0</span>
          </button>
        
          <div class="collapse" id="warningsCollapse">
            <div class="card card-body mt-2">
              <textarea id="box-warnings" class="form-control" rows="3" readonly></textarea>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- 导入数据按钮 -->
    <button id="import-data-btn" class="btn btn-outline-dark" onclick="importData()">
      <i id="import-icon" class="bi bi-send"></i> 导入数据
    </button>
    
    <!-- 报价计算模块 -->
        <!-- 报价计算模块 -->
        <div class="module">
          <div id="quote-calculation" class="my-4">
            <!-- <h3 class="text-center">报价计算</h3> -->
            
            <!-- Tab导航 -->
            <ul class="nav nav-tabs" id="quoteTabs" role="tablist">
              <li class="nav-item" role="presentation">
                <button class="nav-link active" id="single-quote-tab" data-bs-toggle="tab" data-bs-target="#single-quote" type="button" role="tab" aria-controls="single-quote" aria-selected="true">
                  <i class="bi bi-calculator"></i> 单地址报价
                </button>
              </li>
              <li class="nav-item" role="presentation">
                <button class="nav-link" id="batch-quote-tab" data-bs-toggle="tab" data-bs-target="#batch-quote" type="button" role="tab" aria-controls="batch-quote" aria-selected="false">
                  <i class="bi bi-collection"></i> 智能批量报价
                </button>
              </li>
            </ul>
            
            <!-- Tab内容 -->
            <div class="tab-content" id="quoteTabsContent">
              <!-- 单地址报价Tab -->
              <div class="tab-pane fade show active" id="single-quote" role="tabpanel" aria-labelledby="single-quote-tab">
                <form>
                  <!-- 报价识别：箱数、重量、体积 -->
                  <div>
                    <label for="package-info-input" class = "subtitle">报价识别</label>
                    <input type="text" id="package-info-input" class="form-control" placeholder="例如: 21ctns 8.3 kg 2.126 cbm"
                      oninput="parsePackageInfo()" />
                  </div>
                  <div class="table-overflow shrink-on-small">
                  <table id="additional-info-table" class="table table-fixed">
                    <thead>
                      <tr>
                        <th>运输方式</th>
                        <th>国家</th>
                        <th>发货地</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>
                        <!-- 派送方式 -->
                        <td>
                          <select id="delivery-method-select" class="form-control" oninput="updateQuote()" onchange="handleDeliveryMethodChange(); showTab('expressQueryTab');"></select>
                        </td>
                        <!-- 国家 -->
                        <td>
                          <select id="country-select" class="form-control" oninput="updateDeliveryMethods()">
                            <option>美国</option>
                            <option>加拿大</option>
                            <option>欧洲</option>
                            <option>英国</option>
                            <option>澳大利亚</option>
                            <option>🌍其他</option>
                          </select>
                        </td>
                        <!-- 发货地 -->
                        <td>
                          <select id="origin-select" class="form-control" oninput="updateQuote()">
                            <option>华东</option>
                            <option>华南</option>
                          </select>
                        </td>
                      </tr>
                    </tbody>
                  </table>
                  </div>
                <!-- 表格显示字段名和输入框 -->
                <div class="table-overflow shrink-on-small">
                <table class="table table-bordered table-fixed">
                    <thead>
                      <tr>
                        <th style="width: 6em">地址</th>
                        <th style="width: 8.5em">邮编</th>
                        <th style="width: 5em">箱数</th>
                        <th>实重</th>
                        <th>体积</th>
                        <th class="hidden">材积重</th>
                        <th>计费重</th>
                        <th>计费方</th>
                        <th style="width: 5em">泡比</th>
                        <th style="width: 6em">成本</th>
                        <th style="width: 4.5em">利润(RMB)</th>
                        <th style="width: 6em" class="hidden">报价 (RMB)</th>
                        <th style="width: 6em" class="hidden">报价 (USD)</th>
                        <th style="width: 5.5em">利率</th>
                        <th class="hidden">总利润 (RMB)</th>
                        <th class="hidden">总报价 (USD)</th>
                        <th class="hidden">总报价 (RMB)</th>
                        <th>单价</th>
                      </tr>
                    </thead>
                    <tbody>
                      <tr>            
                        <!-- 地址 -->
                        <td><input type="text" id="address" class="form-control uppercase" onchange="updatePostcode()" oninput="checkSpecificAddress()" /></td>
                        <!-- 邮编 -->
                        <td><input type="text" id="postcode" class="form-control" oninput="checkRemoteAddress()" /></td>
                        <!-- 箱数 -->
                        <td><input type="number" id="quantity" class="form-control" value="0" oninput="updateQuote()" /></td>
                        <!-- 实重 -->
                        <td><input type="number" id="weight" class="form-control" value="0" oninput="updateQuote()" /></td>
                        <!-- 体积 -->
                        <td><input type="number" id="volume" class="form-control" value="0" step="any" oninput="updateQuote()" /></td>
                        <!-- 材积重 -->
                        <td class="hidden"><input type="number" id="dimensionWeight" class="form-control result" value="0" step="any" oninput="updateQuote()" /></td>
                        <!-- 计费重 -->
                        <td><input type="number" id="chargeWeight" class="form-control result" value="0" readonly /></td>
                        <!-- 计费方 -->
                        <td><input type="number" id="chargeCBM" class="form-control result" value="0" readonly /></td>
                        <!-- 泡比 -->
                        <td><input type="number" id="volumeRatio" class="form-control result" value="0" readonly /></td>
                        <!-- 成本 (RMB) -->
                        <td>
                          <span id="cost-tooltip" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="我在思考...">
                            <input type="number" id="cost_rmb" class="form-control" value="0" oninput="updateQuote()" />
                          </span>
                        </td>
                        <!-- 利润 (RMB) -->
                        <td><input type="number" id="profit_rmb" class="form-control" value="0" oninput="updateQuote()" /></td>
                        <!-- 报价 (RMB) -->
                        <td class="hidden"><input type="number" id="price_rmb" class="form-control result" value="0" /></td>
                        <!-- 报价 (USD) -->
                        <td class="hidden"><input type="number" id="price_usd" class="form-control result" value="0" /></td>
                        <!-- 利率 -->
                        <td><input type="text" id="profit_rate" class="form-control result" value="0" readonly 
                          data-bs-toggle="tooltip" data-bs-placement="top" />
                        </td>
                        <!-- 总利润 (RMB) -->
                        <td class="hidden"><input type="number" id="total_profit_rmb" class="form-control result" value="0" readonly /></td>
                        <!-- 总报价 (USD) -->
                        <td class="hidden"><input type="number" id="total_price_usd" class="form-control result" value="0" readonly /></td>
                        <!-- 总报价 (RMB) -->
                        <td class="hidden"><input type="number" id="total_price_rmb" class="form-control result" value="0" readonly /></td>
                        <!-- 单价 -->
                        <td><input type="number" id="unit_price" class="form-control result" value="0" readonly /></td>
                      </tr>
                    </tbody>
                  </table>
                  </div>
                </form>
                
                <!-- 多选模块 MOQ等 -->
                <div class="option-items align-items-center">
                  <!-- 偏远地址 -->
                  <div class="form-check mr-3">
                    <input type="checkbox" id="remote-address" class="form-check-input" oninput="updateQuote()" />
                    <label for="remote-address" class="form-check-label">偏远地址</label>
                  </div>
                  <!-- 带电 -->
                  <div class="form-check mr-3">
                    <input type="checkbox" id="battery_check" class="form-check-input" onchange="updateQuote()" />
                    <label for="battery_check" class="form-check-label">带电</label>
                  </div>
                  <!-- 超尺寸 -->
                  <div class="form-check mr-3">
                    <input type="checkbox" id="oversize_check" class="form-check-input" onchange="toggleOverSizeFeeInput()" />
                    <label for="oversize_check" class="form-check-label">超尺寸</label>
                  </div>
                  <!-- 超尺寸费用 输入框 -->
                  <div id="oversize-input-container" style="display: none;">
                    <input type="number" id="oversize-input" class="form-control form-input" placeholder="RMB/箱" value="150" oninput="updateQuote()">
                    <input type="number" id="oversize-quantity" class="form-control form-input" placeholder="箱数" value="0" oninput="updateQuote()">
                  </div>
                  <!-- 超重 -->
                  <div class="form-check mr-3">
                    <input type="checkbox" id="overweight_check" class="form-check-input" onchange="toggleOverWeightFeeInput()" />
                    <label for="overweight_check" class="form-check-label">超重</label>
                  </div>
                  <!-- 超重费用 输入框 -->
                  <div id="overweight-input-container" style="display: none;">
                    <input type="number" id="overweight-input" class="form-control form-input" placeholder="RMB/箱" value="180" oninput="updateQuote()">
                    <input type="number" id="overweight-quantity" class="form-control form-input" placeholder="箱数" value="0" oninput="updateQuote()">
                  </div>
                  <!-- MOQ -->
                  <div class="form-check mr-3">
                    <input type="checkbox" id="MOQ" class="form-check-input" oninput="toggleMOQInput()" />
                    <label for="MOQ" class="form-check-label">MOQ</label>
                  </div>
                  <!-- MOQ 输入框 -->
                  <div id="moq-input-container" style="display: none;">
                    <input type="number" id="moq-input" class="form-control" placeholder="kg" value="21" oninput="updateQuote()">
                  </div>
                  <!-- 提货费 -->
                  <div class="form-check mr-3">
                    <input type="checkbox" id="pickup-fee-checkbox" class="form-check-input" onchange="togglePickupFeeInput()" />
                    <label for="pickup-fee-checkbox" class="form-check-label">提货费</label>
                  </div>
                  <!-- 提货费 输入框 -->
                  <div id="pickup-fee-input-container" style="display: none; width: 100px;">
                    <input type="number" id="pickup-fee" class="form-control" placeholder="RMB" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="我在思考..." oninput="updateQuote()" />
                    <input type="number" id="pickup-fee-USD" class="form-control" placeholder="USD" data-bs-toggle="tooltip" data-bs-placement="top" data-bs-title="我在思考..." oninput="updateQuote()" />
                  </div>
                  <!-- DDU和DDP -->
                  <div class="form-check form-switch">
                    <input type="checkbox" id="ddu_check" class="form-check-input" role="switch" onchange="updateQuote();">
                    <label for="ddu_check" class="form-check-label">
                      <span class="switch-slider">
                        <span class="switch-text"></span>
                     </span>
                    </label>
                  </div>
                  <!-- 美元 -->
                  <div class="form-check mr-3">
                    <input type="checkbox" id="USD_check" class="form-check-input" onchange="updateQuote()" />
                    <label for="USD_check" class="form-check-label">美元</label>
                  </div>
                </div>
              
                <!-- 报价 - 报价格式下拉选项框 -->
                <div class="form-group">
                  <label for="quote-type" class = "subtitle">报价格式</label>
                  <select id="quote-type" class="form-control" onchange="updateQuote()">
                    <option value="通用">通用</option>
                    <option value="通用-CBM">通用-CBM</option>
                    <option value="通用-单价">通用-单价</option>
                    <option value="通用-RMB">通用-RMB</option>
                    <option value="通用-RMB-CBM">通用-RMB-CBM</option>
                    <option value="PROBOXX">PROBOXX</option>
                    <option value="PROBOXX-CBM">PROBOXX-CBM</option>
                    <option value="161">161</option>
                    <option value="163">163</option>
                  </select>
                </div>
                <!-- 报价 - 报价文本 -->
                <div class="form-group mt-4 position-relative">
                  <label for="notes" class="subtitle">报价文本</label>
                  <textarea id="notes" class="form-control" rows="7"></textarea>
                </div>
                
                <!-- 报价历史记录按钮 -->
                <div class="form-group mt-3">
                  <button type="button" class="btn btn-outline-info" data-bs-toggle="modal" data-bs-target="#quoteHistoryModal">
                    <i class="bi bi-clock-history"></i> 报价历史记录
                  </button>
                </div>
              </div>
              
              <!-- 智能批量报价Tab -->
              <div class="tab-pane fade" id="batch-quote" role="tabpanel" aria-labelledby="batch-quote-tab">
                <div class="mt-3">
                  <div class="d-flex justify-content-between align-items-center mb-2">
                    <label class="subtitle mb-0">智能批量报价</label>
                    <div class="btn-group">
                      <button type="button" class="btn btn-sm btn-outline-warning" onclick="addCommonAddressCombination()">
                        <i class="bi bi-lightning"></i> 快速添加
                      </button>
                      <button type="button" class="btn btn-sm btn-outline-primary" onclick="generateBatchQuote()">
                        <i class="bi bi-calculator"></i> 生成报价
                      </button>
                      <div class="btn-group">
                        <select id="batch-export-format" class="form-select form-select-sm" style="width: auto; border-radius: 0.375rem 0 0 0.375rem;">
                          <option value="by-address">按地址导出</option>
                          <option value="by-channel">按渠道导出</option>
                          <option value="excel">导出Excel</option>
                        </select>
                        <button type="button" class="btn btn-sm btn-outline-info" onclick="exportBatchQuote()" style="border-radius: 0 0.375rem 0.375rem 0;">
                          <i class="bi bi-download"></i> 导出报价
                        </button>
                      </div>
                      <button type="button" class="btn btn-sm btn-outline-secondary" onclick="clearBatchQuote()">
                        <i class="bi bi-trash"></i> 清空
                      </button>
                    </div>
                  </div>
                  
                  <!-- 箱规输入 -->
                  <div class="mb-3">
                    <label for="batch-box-spec" class="form-label">箱规信息</label>
                    <input type="text" id="batch-box-spec" class="form-control" 
                           placeholder="例如: 45*45*50 10KG 50CTNS" 
                           oninput="parseBatchBoxSpec()" />
                    <div class="form-text">格式：长*宽*高 重量 总箱数</div>
                  </div>
                  
                  <!-- 地址分配输入 -->
                  <div class="mb-3">
                    <label for="batch-address-distribution" class="form-label">地址分配</label>
                    <input type="text" id="batch-address-distribution" class="form-control" 
                           placeholder="例如: RDU4 4CTNS | AVP1 25CTNS | LAS1 20CTNS | GYR3 1CTNS" 
                           oninput="parseBatchAddressDistribution()" />
                    <div class="form-text">格式：地址 箱数 | 地址 箱数 | ...</div>
                  </div>

                  <!-- 利润输入 -->
                  <div class="mb-3">
                    <label for="batch-profit" class="form-label">利润 (RMB)</label>
                    <input type="number" id="batch-profit" class="form-control" placeholder="例如: 0.5" value="0.5" />
                    <div class="form-text">输入利润</div>
                  </div>

                  <!-- 提货费输入 -->
                  <div class="mb-3">
                    <label for="batch-pickup-fee" class="form-label">提货费 (RMB)</label>
                    <input type="number" id="batch-pickup-fee" class="form-control" placeholder="例如: 100" value="0" />
                    <div class="form-text">输入每箱或每单提货费用，用于计算总费用</div>
                  </div>

                  <!-- 渠道选择 -->
                  <div class="mb-3">
                    <label class="form-label">选择渠道（可多选）</label>
                    <div class="row">
                      <div class="col-md-3">
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" value="Sea truck" id="channel-sea-truck" checked>
                          <label class="form-check-label" for="channel-sea-truck">
                            Sea truck
                          </label>
                        </div>
                      </div>
                      <div class="col-md-3">
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" value="Fast sea truck" id="channel-fast-sea-truck">
                          <label class="form-check-label" for="channel-fast-sea-truck">
                            Fast sea truck
                          </label>
                        </div>
                      </div>
                      <div class="col-md-3">
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" value="Sea express" id="channel-sea-express">
                          <label class="form-check-label" for="channel-sea-express">
                            Sea express
                          </label>
                        </div>
                      </div>
                      <div class="col-md-3">
                        <div class="form-check">
                          <input class="form-check-input" type="checkbox" value="Fast sea express" id="channel-fast-sea-express">
                          <label class="form-check-label" for="channel-fast-sea-express">
                            Fast sea express
                          </label>
                        </div>
                      </div>
                    </div>
                    <div class="form-text">选择要生成报价的渠道，可同时选择多个</div>
                  </div>

                  <!-- 发货区域选择 -->
                  <div class="mb-3" id="batch-shipping-region-container" style="display: none;">
                    <label for="batch-shipping-region" class="form-label">发货区域</label>
                    <select id="batch-shipping-region" class="form-select">
                      <option value="华南">华南</option>
                      <option value="华东">华东</option>
                    </select>
                    <div class="form-text">Sea express和Fast sea express渠道需要选择发货区域</div>
                  </div>
                  
                  <!-- 批量报价结果表格 -->
                  <div id="batch-quote-tables-container" class="accordion" style="display: none;">
                    <!-- 折叠面板将在这里动态生成 -->
                  </div>
                  
                  <!-- 空状态提示 -->
                  <div id="batch-quote-empty-state" class="text-center py-5">
                    <div class="empty-state-icon mb-3">
                      <i class="bi bi-calculator" style="font-size: 4rem; color: #6c757d;"></i>
                    </div>
                    <h5 class="text-muted mb-3">批量报价工具</h5>
                    <p class="text-muted mb-4">请先输入箱规信息和地址分配，然后点击"生成报价"按钮</p>
                    <div class="row justify-content-center">
                      <div class="col-md-8">
                        <div class="card bg-light">
                          <div class="card-body">
                            <h6 class="card-title text-primary">使用步骤：</h6>
                            <ol class="text-start mb-0">
                              <li>输入箱规信息（格式：45*45*50 10KG 50CTNS）</li>
                              <li>输入地址分配（格式：RDU4 4CTNS | AVP1 25CTNS）</li>
                              <li>设置利润（RMB/kg）</li>
                              <li>点击"生成报价"按钮</li>
                            </ol>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                  

                </div>
              </div>
            </div>
          </div>
        </div>

    <!-- Tab功能模块 -->
    <div class="module">
      <div class="container mt-4">
        <!-- Tab 导航 -->
        <ul class="nav nav-tabs" id="myTab" role="tablist">
          <li class="nav-item" role="presentation">
            <button class="nav-link active" id="tab1-tab" data-bs-toggle="tab" data-bs-target="#commonTab" type="button" role="tab" aria-controls="tab1" aria-selected="true">
              快速查询
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="tab2-tab" data-bs-toggle="tab" data-bs-target="#quickReplyTab" type="button" role="tab" aria-controls="quickReplyTab" aria-selected="false">
              快捷回复
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="tab3-tab" data-bs-toggle="tab" data-bs-target="#costCalTab" type="button" role="tab" aria-controls="tab3" aria-selected="false">
              成本计算
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="tab4-tab" data-bs-toggle="tab" data-bs-target="#expressQueryTab" type="button" role="tab" aria-controls="tab4" aria-selected="false">
              快递派查价
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="vehicle-tab" data-bs-toggle="tab" data-bs-target="#vehicleTab" type="button" role="tab" aria-controls="vehicleTab" aria-selected="false">
              车型查询
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="tab6-tab" data-bs-toggle="tab" data-bs-target="#tabSample" type="button" role="tab" aria-controls="tab5" aria-selected="false">
              柚子杂货铺
            </button>
          </li>
          <li class="nav-item" role="presentation">
            <button class="nav-link" id="tab7-tab" data-bs-toggle="tab" data-bs-target="#tabSample" type="button" role="tab" aria-controls="tab5" aria-selected="false">
              Tab样例
            </button>
          </li>
        </ul>

        <!-- Tab 内容 -->
        <div class="tab-content" id="myTabContent">
          
          <!-- Tab1 常用功能 -->
          <div class="tab-pane fade show active" id="commonTab" role="tabpanel" aria-labelledby="tab1-tab">
            <div class="container mt-4">
              <!-- 1. 常用术语 -->
              <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#termModal"
                onclick="renderCategoryButtons();filterTerms('全部');">
                常用术语
              </button>
              <!-- 新增按钮 -->
              <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#usaModal">
                美国
              </button>
              <!-- 3. 客户地址簿 -->
              <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#addressModal"
                id="openAddressBook">
                <i class="bi bi-bookmarks"></i> 客户地址簿
              </button>
              <!-- 4. 世界时钟 -->
              <button type="button" class="btn btn-primary" data-bs-toggle="modal" data-bs-target="#worldClockModal">
                <i class="bi bi-clock"></i> 世界时钟
              </button>
            </div>

            <!-- 模态框-常用术语-->
            <div class="modal fade" id="termModal" tabindex="-1" aria-labelledby="termModalLabel" aria-hidden="true">
              <div class="modal-dialog modal-lg">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="termModalLabel">常用术语中英文对照</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    <!-- 分类筛选按钮 -->
                    <div class="category-buttons" id="categoryButtons">
                      <!-- 按钮将通过 JavaScript 动态生成 -->
                    </div>
            
                    <!-- 标签筛选区域 -->
                    <div class="tag-buttons my-3" id="termTagBtns">
                    </div>
            
                    <!-- 搜索框 -->
                    <div class="input-group mb-3">
                      <input type="text" id="searchInput" class="form-control" placeholder="输入关键字搜索..." aria-label="搜索">
                      <button class="btn btn-outline-secondary" type="button" onclick="clearSearch()">清除</button>
                    </div>
            
                    <!-- 术语对照表 -->
                    <div id="termList"></div>
            
                    <!-- 无结果提示 -->
                    <div id="noResults" class="no-results">没有找到匹配的术语。</div>
            
                    <!-- 翻页按钮 -->
                    <div class="pagination">
                      <button id="prevPage" class="btn btn-outline-primary" onclick="prevPage()">上一页</button>
                      <button id="nextPage" class="btn btn-outline-primary" onclick="nextPage()">下一页</button>
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                  </div>
                </div>
              </div>
            </div>

            <!-- 模态框 -->
            <div class="modal fade" id="usaModal" tabindex="-1" aria-labelledby="usaModalLabel" aria-hidden="true">
              <div class="modal-dialog modal-lg">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="usaModalLabel">美国信息</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    <!-- 搜索框 -->
                    <div class="input-group mb-3">
                      <input type="text" id="usaSearchInput" class="form-control" placeholder="输入关键字搜索..." aria-label="搜索">
                      <button class="btn btn-outline-secondary" type="button" onclick="clearUSASearch()">清除</button>
                    </div>
                    <div id="usaSearchResults">
                      <!-- 搜索结果将动态加载到这里 -->
                    </div>
            
                    <!-- 折叠栏 -->
                    <div class="accordion" id="usaAccordion">
                      <!-- 动态加载分类 -->
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- 3. 客户地址簿 -->
            <div class="modal fade" id="addressModal" tabindex="-1">
              <div class="modal-dialog modal-xl">
                <div class="modal-content">
                  <div class="modal-header bg-light">
                    <h5 class="modal-title">常用地址簿</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal"></button>
                  </div>
                  <div class="modal-body">
                    <!-- 搜索筛选区 -->
                    <div class="row g-2 mb-3">
                      <div class="col-md-6">
                        <input type="text" id="addressSearch" class="form-control" placeholder="搜索客户/地址/邮编...">
                      </div>
                      <div class="col-md-3">
                        <select id="addressTypeFilter" class="form-select">
                          <option value="all">所有类型</option>
                          <option value="commercial">商业地址</option>
                          <option value="personal">私人地址</option>
                        </select>
                      </div>
                      <div class="col-md-3">
                        <select id="remoteFilter" class="form-select">
                          <option value="all">所有区域</option>
                          <option value="remote">偏远地址</option>
                          <option value="non-remote">非偏远</option>
                        </select>
                      </div>
                    </div>
            
                    <!-- 地址表格 -->
                    <div class="table-responsive">
                      <table class="table table-hover align-middle">
                        <thead class="table-light">
                          <tr>
                            <th width="5%">客户</th>
                            <th width="5%">邮编</th>
                            <th width="40%">详细地址</th>
                            <th width="15%">公司名</th>
                            <th width="15%">联系人</th>
                            <th width="10%">电话</th>
                            <th width="5%">类型</th>
                            <th width="5%">区域</th>
                            <th width="10%">操作</th>
                          </tr>
                        </thead>
                        <tbody id="addressTableBody">
                          <!-- 动态加载数据 -->
                        </tbody>
                      </table>
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                  </div>
                </div>
              </div>
            </div>
            
            <!-- 世界时钟模态框 -->
            <div class="modal fade" id="worldClockModal" tabindex="-1" aria-labelledby="worldClockModalLabel" aria-hidden="true">
              <div class="modal-dialog modal-lg">
                <div class="modal-content">
                  <div class="modal-header">
                    <h5 class="modal-title" id="worldClockModalLabel">
                      <i class="bi bi-globe"></i> 世界时钟
                    </h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                  </div>
                  <div class="modal-body">
                    <div class="row" id="worldClockContainer">
                      <!-- 时钟将通过 JavaScript 动态生成 -->
                    </div>
                  </div>
                  <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
                  </div>
                </div>
              </div>
            </div>
            
            </div>

          <!-- Tab2 == 快捷回复 Tab 内容 -->
          <div class="tab-pane fade" id="quickReplyTab" role="tabpanel" aria-labelledby="tab2-tab">
           
            <div class="quick-reply-container" id="quick-reply-container">
              <!-- 分类按钮 -->
              <div class="form-group">
                  <label>选择分类</label>
                  <div id="quick-reply-categories" class="category-buttons">
                      <!-- 分类按钮将通过 JavaScript 动态生成 -->
                  </div>
              </div>
          
              <!-- 输入下拉搜索框 -->
              <div class="form-group">
                <label for="quick-reply-search">搜索回复</label>
                <div class="search-dropdown">
                  <input type="text" id="quick-reply-search" class="form-control" placeholder="输入关键词..." oninput="filterQuickReplies()">
                  <div id="quick-reply-dropdown" class="dropdown-list">
                    <!-- 匹配的回复将通过 JavaScript 动态加载 -->
                  </div>
                </div>
              </div>
              
              <!-- 回复内容显示区域 -->
              <div class="form-group">
                <label for="quick-reply-select">选择回复</label>
                <select id="quick-reply-select" class="form-control" onchange="insertQuickReply()">
                  <option value="">请选择回复</option>
                </select>
              </div>
              <!-- 中文回复 -->
              <div class="form-group">
                  <label for="chinese-message">中文消息</label>
                  <textarea id="chinese-message" class="form-control" rows="4" readonly></textarea>
                  <button class="btn btn-outline-success mt-2" onclick="copyQuickReply('chinese-message', this)">
                      <i class="bi bi-clipboard"></i> 复制
                  </button>
              </div>
          
              <!-- 英文回复 -->
              <div class="form-group">
                  <label for="english-message">English Message</label>
                  <textarea id="english-message" class="form-control" rows="4" readonly></textarea>
                  <button class="btn btn-outline-success mt-2" onclick="copyQuickReply('english-message', this)">
                      <i class="bi bi-clipboard"></i> Copy
                  </button>
              </div>
          </div>

          </div> <!-- Tab 2 end -->
          

          <!-- Tab 3 成本计算 -->
          <div class="tab-pane fade" id="costCalTab" role="tabpanel" aria-labelledby="tab3-tab">
            <div class="container mt-4">
              <!-- 输入区域 -->
              <div class="card mb-4">
                <div class="card-header bg-light">
                  <h5 class="card-title mb-0"><i class="bi bi-calculator me-2"></i>成本计算参数</h5>
                </div>
                <div class="card-body">
                  <!-- 报价识别：箱数、重量、体积 -->
                  <div class="mb-4">
                    <label for="cargo-input" class="form-label fw-bold">报价识别</label>
                    <input type="text" id="cargo-input" class="form-control form-control-lg" placeholder="例如: 21ctns 8.3 kg 2.126 cbm"
                      oninput="parseCalTabCargoInfo()" />
                    <div class="form-text">支持自动识别箱数、重量、体积信息</div>
                  </div>
                  
                  <!-- 产品选择和重量比 -->
                  <div class="row g-3">
                    <div class="col-md-6">
                      <label for="product-select" class="form-label fw-bold">常用产品选择</label>
                      <div class="input-group">
                        <select id="product-select" class="form-select" onchange="onProductChange()">
                          <option value="" selected>请选择产品</option>
                        </select>
                        <input type="text" id="product-hscode" class="form-control" readonly placeholder="海关编码" />
                      </div>
                    </div>
                    <div class="col-md-6">
                      <label for="weight-ratio-select" class="form-label fw-bold">重量比</label>
                      <select id="weight-ratio-select" class="form-select" onchange="calculateCostDDU(); calculateCostDDP();">
                        <option value="363" selected>363</option>
                        <option value="360">360</option>
                        <option value="400">400</option>
                        <option value="450">450</option>
                        <option value="500">500</option>
                        <option value="actual">实际方</option>
                      </select>
                    </div>
                  </div>
                </div>
              </div>
              <!-- 自税成本表格 -->
              <div class="card mb-4">
                <div class="card-header bg-secondary">
                  <h5 class="card-title mb-0 text-white fw-bold"><i class="bi bi-receipt me-2"></i>自税成本计算</h5>
                </div>
                <div class="card-body p-0">
                  <div class="table-responsive">
                    <table class="table table-bordered table-hover mb-0" id="DDUTable">
                <thead class="table-secondary">
                  <tr>
                    <th class="hidden text-dark">箱数</th>
                    <th width="6.5%" class="text-center text-dark">实重(kg)</th>
                    <th width="6%" class="text-center text-dark">体积(cbm)</th>
                    <th width="6%" class="text-center text-dark">计费方(cbm)</th>
                    <th width="4.5%" class="text-center text-dark">泡比</th>
                    <th width="6%" class="text-center text-dark">按方表价(RMB)</th>
                    <th width="5%" class="text-center text-dark">货值(USD)</th>
                    <th width="6%" class="text-center text-dark" data-bs-toggle="tooltip" data-bs-title="美国基础关税加征 30%">税率 (%)</th>
                    <th width="6%" class="text-center text-dark">派送费(USD)</th>
                    <th width="5%" class="text-center text-dark">头程费(RMB)</th>
                    <th width="4%" class="hidden text-center text-dark">派送费(RMB)</th>
                    <th width="4%" class="text-center text-dark">税金(RMB)</th>
                    <th width="4.5%" class="text-center fw-bold text-dark">总成本(RMB)</th>
                    <th width="4%" class="text-center text-dark">单价(cbm)</th>
                    <th width="4%" class="text-center text-dark">单价(kg)</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td class="hidden"><input type="number" class="form-control" id="t_quantity" oninput="calculateCostDDU()" /></td>
                    <td><input type="number" class="form-control" id="t_weight" oninput="calculateCostDDU()" /></td>
                    <td><input type="number" class="form-control" id="t_volume" oninput="calculateCostDDU()" /></td>
                    <td><span id="t_charge-volume">0.00</span></td>
                    <td><span id="t_volume-ratio">0</span></td>
                    <td><input type="number" class="form-control" id="t_price-per-cbm" oninput="calculateCostDDU()" /></td>
                    <td><input type="number" class="form-control" id="t_goods-value" oninput="calculateCostDDU()" value="167" /></td>
                    <td><input type="number" class="form-control" id="t_tax-rate" oninput="calculateCostDDU()" step="0.1" placeholder="输入" /></td>
                    <td><input type="number" class="form-control" id="t_delivery-fee-usd" oninput="calculateCostDDU()" /></td>
                    <td><span id="t_freight-forwarding-cost">0.00</span></td>
                    <td class="hidden"><span id="t_delivery-fee-rmb">0.00</span></td>
                    <td><span id="t_tax-amount">0.00</span></td>
                    <td><span id="t_total-cost">0.00</span></td>
                    <td><span id="t_unit-price-cbm">0.00</span></td>
                    <td><span id="t_unit-price-kg">0.00</span></td>
                  </tr>
                </tbody>
                    </table>
                  </div>
                </div>
              </div>
              
              <!-- 包税成本表格 -->
              <div class="card">
                <div class="card-header bg-secondary">
                  <h5 class="card-title mb-0 text-white fw-bold"><i class="bi bi-box-seam me-2"></i>包税成本计算</h5>
                </div>
                <div class="card-body p-0">
                  <div class="table-responsive">
                    <table class="table table-bordered table-hover mb-0" id="DDPTable">
                <thead class="table-secondary">
                  <tr>
                    <th width="6%" style="display: none;" class="text-dark">箱数</th>
                    <th width="6.5%" class="text-center text-dark">实重 (kg)</th>
                    <th width="6%" class="text-center text-dark">体积 (cbm)</th>
                    <th width="6%" class="text-center text-dark">计费重 (kg)</th>
                    <th width="5.5%" class="text-center text-dark">计费方 (cbm)</th>
                    <th width="5%" class="text-center text-dark">泡比</th>
                    <th width="6%" class="text-center text-dark">按kg表价</th>
                    <th width="6%" class="text-center text-dark">派送费(USD)</th>
                    <th width="6%" class="text-center text-dark">派送费(RMB)</th>
                    <th width="6%" class="text-center text-dark">头程费(RMB)</th>
                    <th width="6%" class="text-center text-dark">派送费(RMB)</th>
                    <th width="6%" class="text-center fw-bold text-dark">总成本 (RMB)</th>
                    <th width="5%" class="text-center text-dark">单价(cbm)</th>
                    <th width="5%" class="text-center text-dark">单价(kg)</th>
                  </tr>
                </thead>
                <tbody>
                  <tr>
                    <td style="display: none;"><input type="number" class="form-control" id="tp_quantity" oninput="calculateCostDDP()" /></td>
                    <td><input type="number" class="form-control" id="tp_weight" oninput="calculateCostDDP()" /></td>
                    <td><input type="number" class="form-control" id="tp_volume" oninput="calculateCostDDP()" /></td>
                    <td><span id="tp_charge-weight">0.00</span></td>
                    <td><span id="tp_charge-cbm">0.00</span></td>
                    <td><span id="tp_volume-ratio">0</span></td>
                    <td><input type="number" class="form-control" id="tp_price-per-kg" oninput="calculateCostDDP()" /></td>
                    <td><input type="number" class="form-control" id="tp_delivery-fee-usd" oninput="calculateCostDDP()" /></td>
                    <td><input type="number" class="form-control" id="tp_delivery-fee-rmb" oninput="calculateCostDDP()" /></td>
                    <td><span id="tp_freight-forwarding-cost">0.00</span></td>
                    <td><span id="tp_delivery-fee-final">0.00</span></td>
                    <td><span id="tp_total-cost">0.00</span></td>
                    <td><span id="tp_unit-price-cbm">0.00</span></td>
                    <td><span id="tp_unit-price-kg">0.00</span></td>
                  </tr>
                </tbody>
                    </table>
                  </div>
                </div>
              </div>
            </div>
          </div>

          <!-- Tab 4 快递派查价 -->
          <div class="tab-pane fade" id="expressQueryTab" role="tabpanel" aria-labelledby="tab4-tab">
            <div class="container mt-4">
              <!-- 使用 flex 容器包裹两个表格 -->
              <div class="price-tables-container">
                <!-- 华南价格表 -->
                <div class="price-table-container">
                  <h4 class="text-center" id="southTable">华南</h4>
                  <table class="table table-bordered" id="southChinaPriceTable">
                    <thead>
                      <tr>
                        <th>区域</th>
                        <th>12KG</th>
                        <th>21KG+</th>
                        <th>45KG+</th>
                        <th>71KG+</th>
                        <th>101KG+</th>
                      </tr>
                    </thead>
                    <tbody>
                      <!-- 表格内容将通过 JavaScript 动态生成 -->
                    </tbody>
                  </table>
                </div>

                <!-- 华东价格表 -->
                <div class="price-table-container">
                  <h4 class="text-center" id="eastTable">华东</h4>
                  <table class="table table-bordered" id="eastChinaPriceTable">
                    <thead>
                      <tr>
                        <th>区域</th>
                        <th>12KG</th>
                        <th>21KG+</th>
                        <th>45KG+</th>
                        <th>71KG+</th>
                        <th>101KG+</th>
                      </tr>
                    </thead>
                    <tbody>
                      <!-- 表格内容将通过 JavaScript 动态生成 -->
                    </tbody>
                  </table>
                </div>
              </div>
              <br>
              <div class="row">
                <!-- 发货区域 -->
                <div class="col-md-6 mb-3">
                  <div class="form-floating">
                    <select class="form-select" id="t4_region">
                      <option value="华东">华东</option>
                      <option value="华南">华南</option>
                    </select>
                    <label for="t4_region">发货区域</label>
                  </div>
                </div>
              
                <!-- 渠道 -->
                <div class="col-md-6 mb-3">
                  <div class="form-floating">
                    <select class="form-select" id="t4_channel" onchange="renderPriceTable()">
                      <option value="美森正班">美森正班</option>
                      <option value="美森加班">美森加班</option>
                      <option value="普船">普船</option>
                      <option value="以星合德">以星合德</option>
                      <option value="空派不带电">空派不带电</option>
                      <option value="空派带电">空派带电</option>
                    </select>
                    <label for="t4_channel">渠道</label>
                  </div>
                </div>
              </div>

              <!-- 承运商选择（可选） -->
              <div class="row">
                <div class="col-md-6 mb-3">
                  <div class="form-floating">
                    <select class="form-select" id="t4_carrier"></select>
                    <label for="t4_carrier">承运商</label>
                  </div>
                </div>
              </div>

              <div class="result mt-3" id="t4_priceResult">单价：--</div>
            </div>
          </div>

          <!-- Tab 5 提货费计算 -->
          <div class="tab-pane fade" id="vehicleTab" role="tabpanel" aria-labelledby="vehicle-tab">
            <div class="container mt-4">
                <!-- 输入区域 -->
                <div class="row mb-4">
                    <div class="col-md-3">
                        <label for="pickup-location">起始地</label>
                        <select id="pickup-location" class="form-control">
                            <option value="">请选择起始地</option>
                            <!-- 动态加载起始地 -->
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label for="delivery-location">收货地</label>
                        <select id="delivery-location" class="form-control">
                            <!-- 动态加载收货地 -->
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label for="cargo-type">货物类型</label>
                        <select id="cargo-type" class="form-control">
                            <!-- 动态加载货物类型 -->
                        </select>
                    </div>
                </div>
                <div class="row mb-4">
                    <div class="col-md-3">
                        <label for="cargo-weight">重量 (kg)</label>
                        <input type="number" id="cargo-weight" class="form-control" placeholder="请输入重量">
                    </div>
                    <div class="col-md-3">
                        <label for="cargo-volume">方数 (cbm)</label>
                        <input type="number" id="cargo-volume" class="form-control" placeholder="请输入方数">
                    </div>
                    <div class="col-md-3">
                        <label for="vehicle-select">车型</label>
                        <select id="vehicle-select" class="form-control">
                            <option value="">请选择车型</option>
                            <!-- 动态加载车型 -->
                        </select>
                    </div>
                    <div class="col-md-3">
                        <label for="pickup-fee-display">提货费 (RMB)</label>
                        <input type="text" id="pickup-fee-display" class="form-control" readonly>
                    </div>
                </div>
    
                <!-- 车型表格 -->
                <table class="table table-bordered">
                    <thead>
                        <tr>
                            <th>车型</th>
                            <th>厢长 (cm)</th>
                            <th>载重 (kg)</th>
                            <th>载方 (cbm)</th>
                        </tr>
                    </thead>
                    <tbody id="vehicle-table-body">
                        <!-- 动态加载车型数据 -->
                    </tbody>
                </table>
            </div>
        </div>

          <!-- Tab Sample 内容 -->
          <div class="tab-pane fade" id="tabSample" role="tabpanel" aria-labelledby="tab4-tab">
            <div class="container mt-4">
              <h4 class="mb-4">柚子杂货铺</h4>
              
              <!-- 工具按钮区域 -->
              <div class="row">
                <div class="col-md-4 mb-3">
                  <button type="button" class="btn btn-primary w-100" data-bs-toggle="modal" data-bs-target="#dateCalcModal">
                    <i class="bi bi-calendar-plus"></i> 日期计算工具
                  </button>
                </div>
                <div class="col-md-4 mb-3">
                  <button type="button" class="btn btn-outline-secondary w-100" disabled>
                    <i class="bi bi-tools"></i> 更多工具
                  </button>
                </div>
                <div class="col-md-4 mb-3">
                  <button type="button" class="btn btn-outline-secondary w-100" disabled>
                    <i class="bi bi-gear"></i> 设置
                  </button>
                </div>
              </div>
            </div>
          </div>

        </div> <!-- Tab 内容 -->
      </div>
      </div>
      
      <!-- 日期计算模态框 -->
      <div class="modal fade" id="dateCalcModal" tabindex="-1" aria-labelledby="dateCalcModalLabel" aria-hidden="true">
        <div class="modal-dialog modal-xl">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="dateCalcModalLabel">
                <i class="bi bi-calendar-plus"></i> 日期计算工具
              </h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <!-- 日期计算功能 -->
              <div class="row">
                <!-- 功能1：日期+天数计算 -->
                <div class="col-md-6 mb-4">
                  <div class="card">
                    <div class="card-header">
                      <h5 class="mb-0">日期加减计算</h5>
                    </div>
                    <div class="card-body">
                      <div class="mb-3">
                        <label for="baseDate" class="form-label">选择基准日期</label>
                        <input type="date" class="form-control" id="baseDate" onchange="calculateDateFromDays()">
                      </div>
                      <div class="mb-3">
                        <label for="daysInput" class="form-label">输入天数</label>
                        <div class="input-group">
                          <input type="number" class="form-control" id="daysInput" placeholder="正数往后，负数往前" onchange="calculateDateFromDays()" oninput="calculateDateFromDays()">
                          <span class="input-group-text">天</span>
                        </div>
                        <div class="form-text">正数表示往后计算，负数表示往前计算</div>
                      </div>
                      <div class="mb-3">
                        <label class="form-label">计算结果</label>
                        <div class="alert alert-info" id="dateResult1">
                          请选择日期并输入天数
                        </div>
                      </div>
                      <button type="button" class="btn btn-primary" onclick="calculateDateFromDays()">计算</button>
                      <button type="button" class="btn btn-secondary ms-2" onclick="clearDateCalc1()">清空</button>
                    </div>
                  </div>
                </div>
                
                <!-- 功能2：日期差计算 -->
                <div class="col-md-6 mb-4">
                  <div class="card">
                    <div class="card-header">
                      <h5 class="mb-0">日期差计算</h5>
                    </div>
                    <div class="card-body">
                      <div class="mb-3">
                        <label for="startDate" class="form-label">开始日期</label>
                        <input type="date" class="form-control" id="startDate" onchange="calculateDateDifference()">
                      </div>
                      <div class="mb-3">
                        <label for="endDate" class="form-label">结束日期</label>
                        <input type="date" class="form-control" id="endDate" onchange="calculateDateDifference()">
                      </div>
                      <div class="mb-3">
                        <label class="form-label">计算结果</label>
                        <div class="alert alert-info" id="dateResult2">
                          请选择开始日期和结束日期
                        </div>
                      </div>
                      <button type="button" class="btn btn-primary" onclick="calculateDateDifference()">计算</button>
                      <button type="button" class="btn btn-secondary ms-2" onclick="clearDateCalc2()">清空</button>
                    </div>
                  </div>
                </div>
              </div>
              
              <!-- 快速操作按钮 -->
              <div class="row">
                <div class="col-12">
                  <div class="card">
                    <div class="card-header">
                      <h5 class="mb-0">快速操作</h5>
                    </div>
                    <div class="card-body">
                      <div class="row">
                        <div class="col-md-3 mb-2">
                          <button type="button" class="btn btn-outline-primary w-100" onclick="setToday()">设为今天</button>
                        </div>
                        <div class="col-md-3 mb-2">
                          <button type="button" class="btn btn-outline-primary w-100" onclick="setTomorrow()">设为明天</button>
                        </div>
                        <div class="col-md-3 mb-2">
                          <button type="button" class="btn btn-outline-primary w-100" onclick="setYesterday()">设为昨天</button>
                        </div>
                        <div class="col-md-3 mb-2">
                          <button type="button" class="btn btn-outline-secondary w-100" onclick="clearAllDateCalc()">全部清空</button>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
            </div>
          </div>
        </div>
      </div>
      
      <!-- 复制成功提示 -->
      <div class="position-fixed bottom-0 end-0 p-3" style="z-index: 1090">
        <div id="copyToast" class="toast" role="alert" aria-live="assertive" aria-atomic="true">
          <div class="toast-header">
            <strong class="me-auto">系统提示</strong>
            <button type="button" class="btn-close" data-bs-dismiss="toast" aria-label="Close"></button>
          </div>
          <div class="toast-body">
            <span id="toastMessage"></span>
          </div>
        </div>
      </div>
      
      <!-- 报价历史记录模态框 -->
      <div class="modal fade" id="quoteHistoryModal" tabindex="-1" aria-labelledby="quoteHistoryModalLabel" aria-hidden="true" data-bs-backdrop="static">
        <div class="modal-dialog modal-xl">
          <div class="modal-content">
            <div class="modal-header">
              <h5 class="modal-title" id="quoteHistoryModalLabel">
                <i class="bi bi-clock-history"></i> 报价历史记录
              </h5>
              <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
            </div>
            <div class="modal-body">
              <!-- 搜索和筛选区域 -->
              <div class="row mb-3">
                <div class="col-md-3">
                  <input type="text" id="quoteHistorySearch" class="form-control" placeholder="搜索地址、邮编...">
                </div>
                <div class="col-md-2">
                  <select id="quoteHistoryCountry" class="form-control">
                    <option value="">所有国家</option>
                    <option value="美国">美国</option>
                    <option value="加拿大">加拿大</option>
                    <option value="欧洲">欧洲</option>
                    <option value="英国">英国</option>
                    <option value="澳大利亚">澳大利亚</option>
                    <option value="🌍其他">🌍其他</option>
                  </select>
                </div>
                <div class="col-md-2">
                  <select id="quoteHistoryDateRange" class="form-control">
                    <option value="7">最近7天</option>
                    <option value="30">最近30天</option>
                    <option value="90">最近90天</option>
                    <option value="all">全部</option>
                  </select>
                </div>
                <div class="col-md-2">
                  <button type="button" class="btn btn-outline-primary" onclick="searchQuoteHistory()">
                    <i class="bi bi-search"></i> 搜索
                  </button>
                </div>
                <div class="col-md-3 text-end">
                  <button type="button" class="btn btn-outline-danger" onclick="clearQuoteHistory()">
                    <i class="bi bi-trash"></i> 清空历史
                  </button>
                </div>
              </div>
              
              <!-- 历史记录表格 -->
              <div class="table-responsive">
                <table class="table table-striped table-hover">
                  <thead>
                    <tr>
                      <th>时间</th>
                      <th>地址</th>
                      <th>国家</th>
                      <th>箱数</th>
                      <th>重量(kg)</th>
                      <th>体积(cbm)</th>
                      <th>报价(USD)</th>
                      <th>总价(USD)</th>
                      <th>操作</th>
                    </tr>
                  </thead>
                  <tbody id="quoteHistoryTableBody">
                    <!-- 动态加载历史记录 -->
                  </tbody>
                </table>
              </div>
              
              <!-- 分页 -->
              <div class="d-flex justify-content-between align-items-center mt-3">
                <div>
                  <span id="quoteHistoryInfo">显示 0 条记录</span>
                </div>
                <div>
                  <button id="quoteHistoryPrev" class="btn btn-outline-primary btn-sm" onclick="prevQuoteHistoryPage()">上一页</button>
                  <span id="quoteHistoryPageInfo" class="mx-2">第 1 页</span>
                  <button id="quoteHistoryNext" class="btn btn-outline-primary btn-sm" onclick="nextQuoteHistoryPage()">下一页</button>
                </div>
              </div>
            </div>
            <div class="modal-footer">
              <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">关闭</button>
            </div>
          </div>
        </div>
      </div>
  </div>

  <!-- 引入 Bootstrap JS -->
  <script src="js/common/popper.min.js"></script>
  <script src="js/common/bootstrap.min.js"></script>
  <!-- 引入 decimal.min.js -->
  <script src="js/common/decimal.min.js"></script>
  <!-- 引入 数据配置文件 data.js -->
  <script src="data/private_data.js"></script>
  <script src="data/data.js"></script>
  <!-- 引入初始化文件 -->
  <script src="js/tab.js"></script>
  <!-- 引入外部脚本文件 -->
  <script src="js/common.js"></script>
  <script src="js/caltools.js"></script>
  <script src="js/ui.js"></script>
  <script src="js/rules.js"></script>
  <script src="js/logistics.js"></script>
</body>

</html>